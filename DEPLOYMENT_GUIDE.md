# Руководство по развертыванию Google Apps Script

Это пошаговое руководство поможет вам развернуть Google Apps Script для интеграции с формой регистрации.

## Шаг 1: Подготовка Google Таблицы

1. Создайте новую Google Таблицу или используйте существующую
2. Убедитесь, что у таблицы есть следующие заголовки в первой строке:
   - A1: `ID_reg`
   - B1: `ID_masterclass`
   - C1: `Имя`
   - D1: `Фамилия`
   - E1: `Почта`
   - F1: `Статус`
3. Скопируйте ID таблицы из URL (это длинная строка в URL между `/d/` и `/edit`)

## Шаг 2: Создание Google Apps Script

1. Перейдите на [script.google.com](https://script.google.com)
2. Нажмите "Новый проект"
3. Замените содержимое файла `Code.gs` на код из файла `Code.gs` в этом репозитории
4. Замените `YOUR_GOOGLE_SHEET_ID` в строке 14 на ID вашей Google Таблицы

## Шаг 3: Тестирование скрипта

1. В редакторе скрипта нажмите "Отладка" → "Выполнить функцию" → `doGet`
2. Если все настроено правильно, вы увидите тестовую страницу

## Шаг 4: Публикация веб-приложения

1. Нажмите "Развернуть" → "Новая развертка"
2. Выберите:
   - Тип: "Веб-приложение"
   - Доступ: "Для всех (кто имеет ссылку)" или "Для пользователя, от имени которого запущено приложение"
   - Версия: "Новая версия"
3. Нажмите "Развернуть"
4. Скопируйте URL развертывания (он будет в формате `https://script.google.com/macros/s/.../exec`)

## Шаг 5: Обновление формы регистрации

1. В файле `index.html` найдите строку с URL скрипта
2. Замените `YOUR_SCRIPT_ID` на ID вашего скрипта (часть URL между `s/` и `/exec`)
3. Пример: если ваш URL `https://script.google.com/macros/s/abc123def456/exec`, то замените `YOUR_SCRIPT_ID` на `abc123def456`

## Шаг 6: Тестирование интеграции

1. Используйте файл `test-script.html` для тестирования интеграции
2. Введите ID вашего скрипта и тестовые данные
3. Нажмите "Отправить тестовый запрос"
4. Проверьте, что данные появились в вашей Google Таблице

## Возможные проблемы и решения

- **Ошибка "Access denied"**: Убедитесь, что вы настроили доступ к веб-приложению как "Для всех (кто имеет ссылку)" или предоставили доступ нужным пользователям
- **Ошибка "File not found"**: Проверьте, что ID таблицы указан правильно в коде скрипта
- **Ошибка "Permission denied"**: Убедитесь, что у вас есть права на редактирование Google Таблицы

## Безопасность

- Не делайте веб-приложение публичным для всех, если не уверены в безопасности
- Рассмотрите возможность добавления дополнительной проверки данных в Google Apps Script
- Периодически проверяйте логи выполнения скрипта